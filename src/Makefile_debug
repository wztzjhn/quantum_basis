CXX       = g++
CXXFLAGS  = -O0 -g -D_GLIBCXX_DEBUG -std=c++17 -Wall -Wextra -m64 -fopenmp -I${MKL_INC_DIR} \
            -isystem ${HOME}/opt/arpackpp/include -isystem ${HOME}/opt/arpackpp/examples/areig
LIBS      = -larpack \
            -L${MKL_LIB_DIR} -Wl,--no-as-needed -lmkl_gf_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread -lm -ldl \
            -fopenmp

include makefile_list/object_list.txt

libqbasis_debug.a: $(OBJS)
	ar rvs libqbasis_debug.a $(OBJS)

install: libqbasis_debug.a
	$(RM) ${HOME}/installs/lib/libqbasis_debug.*; cp libqbasis_debug.a ${HOME}/installs/lib; cp qbasis.h ${HOME}/installs/include

%.o: %.cc
	$(CXX) $(CXXFLAGS) -c -o $@ $<

clean:
	$(RM) *.o *.a
